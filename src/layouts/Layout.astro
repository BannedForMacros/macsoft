---
import "../styles/global.css";
const {
  title = "MacSoft",
  description = "Software a Medida que Impulsa tu Empresa",
} = Astro.props;
---

<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Alpine.js & Ionicons -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.2.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.2.2/dist/ionicons/ionicons.js"
    ></script>

    <!-- Una sola línea de estilos para exponer --nav-h -->
    <style>:root{--nav-h:4rem}</style>
  </head>

  <body class="antialiased font-sans text-gray-800">
    <!-- NAVBAR (fija altura → --nav-h) -->
    <nav
      x-data="{ open:false }"
      @resize.window="$nextTick(()=> document.documentElement.style.setProperty('--nav-h',`${$el.offsetHeight}px`))"
      x-init="document.documentElement.style.setProperty('--nav-h',`${$el.offsetHeight}px`)"
      class="fixed top-0 inset-x-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200"
    >
      <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">
        <a href="/" class="text-primary font-heading text-2xl font-bold">
          Mac<span class="text-accent">Soft</span>
        </a>

        <div class="hidden md:flex space-x-6">
          <a href="/servicio" class="nav-link">Servicios</a>
          <a href="/equipo" class="nav-link">Nuestro&nbsp;Equipo</a>
          <a href="/procesos" class="nav-link">Procesos</a>
          <a href="/acerca" class="nav-link">Acerca&nbsp;de&nbsp;Nosotros</a>
          <a href="/contacto" class="btn btn-primary">Contáctanos</a>
        </div>

        <button
          @click="open = !open"
          class="md:hidden p-2 rounded hover:bg-gray-100 transition"
        >
          <ion-icon :name="open ? 'close' : 'menu'" class="text-2xl"></ion-icon>
        </button>
      </div>

      <!-- menú móvil -->
      <div
        x-show="open"
        x-transition
        class="md:hidden bg-white/90 backdrop-blur-md border-t border-gray-200"
        @open.window="$nextTick(()=> document.documentElement.style.setProperty('--nav-h',`${$root.offsetHeight}px`))"
      >
        <div class="px-6 py-4 space-y-2">
          <a @click="open=false" href="/servicio" class="block nav-link">Servicios</a>
          <a @click="open=false" href="/equipo" class="block nav-link">Nuestro&nbsp;Equipo</a>
          <a @click="open=false" href="/procesos" class="block nav-link">Procesos</a>
          <a @click="open=false" href="/acerca" class="block nav-link">Acerca&nbsp;de&nbsp;Nosotros</a>
          <a @click="open=false" href="/contacto" class="block btn btn-primary w-full text-center">
            Contáctanos
          </a>
        </div>
      </div>
    </nav>

    <!-- CONTENIDO (se adapta al alto real del navbar) -->
    <main style="padding-top:var(--nav-h);">
      <slot />
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-100 py-8">
      <div class="max-w-7xl mx-auto px-6 text-center text-gray-500">
        © {new Date().getFullYear()} MacSoft. Todos los derechos reservados.
      </div>
    </footer>

    <!-- Intersection Observer para animaciones de scroll -->
    <script>
      const observer=new IntersectionObserver(
        entries=>{
          entries.forEach(e=>{
            if(e.isIntersecting){
              e.target.classList.add('in');
              observer.unobserve(e.target);
            }
          });
        },
        {threshold:.15}
      );
      document.querySelectorAll('.animate-on-scroll').forEach(el=>observer.observe(el));
    </script>
  </body>
</html>
